# 🎯 多题目识别功能说明

## ✨ 新功能概述

现在K12错题本支持**一页多题识别**功能！

当你上传一张包含多个题目的试卷或作业图片时，可以：
1. **框选每个题目区域**
2. **对每个题目单独进行OCR识别**
3. **为每个题目单独填写错误答案和正确答案**
4. **逐个进行AI分析**

---

## 📖 使用流程

### 1. 上传图片
- 点击"拍照或上传图片"
- 选择一张包含多道题目的试卷/作业图片

### 2. 框选题目区域
- 在图片上用鼠标拖动，框选第一道题目
- 继续框选其他题目（可以框选多道）
- 点击"完成"按钮

**操作提示**:
- 每个框选区域会显示题号（1、2、3...）
- 点击"撤销"可以删除最后一个框选
- 点击"清除"可以重新开始框选

### 3. 逐题处理
- 系统会自动跳转到第一题
- 点击"🔄 重新识别"进行OCR识别
- 填写错误答案和正确答案
- 点击"🧠 AI智能分析"进行分析
- 点击"✅ 保存到错题本"

### 4. 处理下一题
- 保存后系统会询问是否继续处理下一题
- 点击"是"自动跳转到下一题
- 或使用顶部导航条切换到任意题目

---

## 🎨 界面说明

### 题目选择界面
- **画布区域**: 显示图片，支持拖动框选
- **题号标签**: 每个框选区域显示编号
- **操作按钮**:
  - 取消: 返回上传页面
  - 撤销: 删除最后一个框选
  - 清除: 清除所有框选
  - 完成: 完成框选，进入识别阶段

### 题目导航条
- **上一题**: 切换到上一道题目
- **题号按钮**: 快速跳转到指定题目
- **下一题**: 切换到下一道题目
- **高亮显示**: 当前处理的题目会高亮显示

---

## 💡 使用技巧

### 框选技巧
1. **精确框选**: 尽量只框选题目内容，避免包含其他题目
2. **完整框选**: 确保题目的题干、选项、解答都在框选范围内
3. **适当留白**: 框选时适当留出边缘，避免文字被裁切

### 处理效率
1. **批量框选**: 一次性框选所有需要录入的题目
2. **快速切换**: 使用导航条快速切换题目
3. **自动保存**: 每道题的答案会自动保存，切换题目不会丢失

### 特殊情况
- **单张图片**: 如果只有一道题，直接点击"完成"跳过框选
- **大量题目**: 建议分批处理，每批5-10题为宜
- **不规则排版**: 对于竖排版或特殊排版，可以分别框选

---

## 📊 功能优势

### 对比传统方式

| 功能 | 传统方式 | 多题目识别 |
|------|---------|-----------|
| **录入效率** | 每次只能录入1题 | 一次可录入多题 |
| **操作步骤** | 重复上传图片 | 一次框选，逐题处理 |
| **时间成本** | 10题需要10次操作 | 10题只需1次框选 |
| **准确性** | 可能重复或遗漏 | 系统自动跟踪进度 |

### 适用场景
✅ **非常适合**:
- 试卷错题录入（一页多题）
- 作业错题整理
- 练习题收集

⚠️ **不太适合**:
- 单独的一张图片（单题模式更合适）
- 题目间距太近难以区分

---

## 🔧 技术实现

### 核心技术
- **Canvas API**: 实现图片区域选择和裁剪
- **React Hooks**: 管理多个题目状态
- **Base64编码**: 图片数据传输
- **百度OCR**: 文字识别

### 数据结构
```javascript
selectedQuestions = [
  {
    id: 1,
    imageData: "data:image/jpeg;base64,...",
    rect: { x, y, width, height },
    ocrResult: "题目内容...",
    wrongAnswer: "错误答案...",
    correctAnswer: "正确答案..."
  },
  // ... 更多题目
]
```

---

## 🎯 后续优化方向

### 短期优化
- [ ] 自动检测题目边界（AI辅助框选）
- [ ] 支持键盘快捷键操作
- [ ] 添加框选预览模式

### 长期优化
- [ ] 智能题目分割算法
- [ ] 批量导出功能
- [ ] 题目分类自动识别

---

## 📝 更新日志

**v0.2.0** (2025-02-22)
- ✅ 新增题目区域选择组件
- ✅ 支持一页多题识别
- ✅ 添加题目导航功能
- ✅ 优化多题处理流程

---

**现在就开始使用多题目识别功能吧！** 🚀

访问: http://localhost:5173
